import{d as V,s as N,x as a,e as n,F as B,f as s,t as l,k as d,g as h,i as D,y as p,z as y,m as P,A as C,B as g,o as r,D as E}from"./index-DuX6IK19.js";import{a as A}from"./index-T52F6kOd.js";import{u as F,a as b}from"./useAsyncPerson-N21pRBcq.js";import{u as S}from"./usePersonReturnVisits-BTQpl9CO.js";const j={class:"max-w-prose mx-auto py-2 px-3"},I={key:0,class:"text-3xl font-bold text-center"},L={class:"flex justify-between flex-wrap gap-3"},Q={class:"text-3xl font-bold"},T={class:"text-2xl font-semibold"},U=["href"],$={key:0,class:"underline text-sm"},z={class:"whitespace-pre-line"},Y={class:"text-right"},q={class:"px-2 py-1"},G={class:"flex justify-between"},H={async beforeRouteEnter(u,m,i){try{await b({id:parseInt(u.params.id,10)}),i()}catch{i({name:"NotFound"})}}},W=V({...H,__name:"PeopleShow",props:{id:{}},setup(u){const m=P(),i=C();N(t=>{b({id:parseInt(t.params.id,10)}).catch(()=>{m.replace({name:"NotFound"})})});const _=u,c=a(()=>_.id),w=F({id:c}),o=a(()=>w.data.value),k=S({personId:c}),f=a(()=>{if(!o.value||!o.value.location)return"";const{latitude:t,longitude:e}=o.value.location;return!t||!e?"":`https://www.google.com/maps/search/${t},${e}`}),v=a(()=>{var t,e;return(e=(t=k.data.value)==null?void 0:t.at(0))==null?void 0:e.returnDate.getDay()});return A(a(()=>{var t;return[(t=o.value)==null?void 0:t.name,i.meta.appName].filter(Boolean).join(" | ")})),(t,e)=>{const x=g("RouterLink"),R=g("router-view");return r(),n("main",j,[o.value?(r(),n(B,{key:1},[s("div",L,[s("h1",Q,l(o.value.name||"Sin nombre"),1),s("h2",T,[d(l(o.value.colony)+" ",1),f.value?(r(),n("a",{key:0,href:f.value,rel:"noopener noreferrer",target:"_blank",class:"text-base bg-lemon-100"}," (UbicaciÃ³n) ",8,U)):h("",!0)])]),v.value!=null?(r(),n("span",$," Volver el "+l(D(E)[v.value]),1)):h("",!0),s("p",z,l(o.value.description),1),s("div",Y,[p(x,{to:{name:"PeopleEdit",params:{id:c.value}},class:"underline bg-lemon-100"},{default:y(()=>e[0]||(e[0]=[d(" Editar persona ")])),_:1},8,["to"])]),e[3]||(e[3]=s("hr",{class:"h-0.5 bg-asparagus-600 my-3"},null,-1)),s("section",q,[s("div",G,[e[2]||(e[2]=s("h2",{class:"text-xl font-semibold"},"Revisitas",-1)),p(x,{to:{name:"PeopleReturnVisitsCreate"},class:"underline bg-lemon-100","active-class":"hidden"},{default:y(()=>e[1]||(e[1]=[d(" Agregar revisita ")])),_:1})]),p(R,{class:"mt-6"})])],64)):(r(),n("h1",I,"Error"))])}}});export{W as default};
